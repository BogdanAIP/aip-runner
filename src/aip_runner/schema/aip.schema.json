{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://aip.dev/schema/v1.0",
  "title": "AIP Manifest",
  "type": "object",
  "required": ["aip_version", "project", "agents"],
  "properties": {
    "aip_version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+$",
      "description": "Версия спецификации AIP (формат MAJOR.MINOR)"
    },
    "project": {
      "type": "object",
      "description": "Мета-информация о проекте",
      "required": ["name"],
      "properties": {
        "name": { "type": "string" },
        "description": { "type": "string" },
        "status": { "type": "string", "enum": ["planning", "active", "completed", "archived"] },
        "tags": { "type": "array", "items": { "type": "string" } }
      },
      "additionalProperties": false
    },
    "agents": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id", "name", "role", "goal"],
        "properties": {
          "id": { "type": "string", "description": "Уникальный идентификатор" },
          "name": { "type": "string" },
          "role": { "type": "string" },
          "goal": { "type": "string" },
          "backstory": { "type": "string" },
          "tools": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["name", "type"],
              "properties": {
                "name": { "type": "string" },
                "type": { "type": "string", "enum": ["api", "builtin", "custom", "file"] },
                "provider": { "type": "string" }
              },
              "additionalProperties": false
            }
          }
        },
        "additionalProperties": false
      }
    },
    "workflow": {
      "type": "object",
      "properties": {
        "type": { "type": "string", "enum": ["sequential", "hierarchical", "reactive"] },
        "steps": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["agent", "task"],
            "properties": {
              "agent": { "type": "string", "description": "ID агента из списка agents" },
              "task": { "type": "string" },
              "expected_output": { "type": "string" }
            },
            "additionalProperties": false
          }
        }
      },
      "additionalProperties": false
    },
    "artifacts": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["filename"],
        "properties": {
          "filename": { "type": "string" },
          "description": { "type": "string" },
          "mime_type": { "type": "string" },
          "generated_by": { "type": "string" }
        },
        "additionalProperties": false
      }
    },
    "context": {
      "type": "object",
      "properties": {
        "source_platform": { "type": "string" },
        "exported_at": { "type": "string", "format": "date-time" },
        "import_instructions": { "type": "string" }
      },
      "additionalProperties": false
    },
    "metadata": {
      "type": "object",
      "properties": {
        "author": { "type": "string" },
        "license": { "type": "string" },
        "encryption": { "type": "string", "enum": ["none", "aes-256"] }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
